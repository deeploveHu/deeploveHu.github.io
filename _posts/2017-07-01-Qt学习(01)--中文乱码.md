---
layout: post
title:  "Qt学习(01)--中文乱码"
categories: Qt
tags:  Qt
author: bloglink
---

* content
{:toc}

Qt5.0之前的版本由于编码不统一，经常出现中文乱码问题，参考了很多资料发现官方也没有好的解决方案，但网上流传的方法可以解决大部分乱码问题，代码如下

    #if (QT_VERSION <= QT_VERSION_CHECK(5, 0, 0))
        QTextCodec *codec = QTextCodec::codecForName("UTF-8");
        QTextCodec::setCodecForLocale(codec);//设置和对本地文件系统读写时候的默认编码格式
        QTextCodec::setCodecForCStrings(codec);//设置传给tr函数时的默认字符串编码
        QTextCodec::setCodecForTr(codec);//用在字符常量或者QByteArray构造QString对象时使用的一种编码方式
    #endif

*官方说这种方法用错了，但暂时没有更好的方法了，况且Qt5以下的版本使用会越来越少，此文仅为了记录。*
