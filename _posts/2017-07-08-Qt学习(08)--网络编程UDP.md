---
layout: post
title:  "Qt学习(08)--网络编程UDP"
categories: Qt
tags:  Qt
author: bloglink
---

* content
{:toc}

Qt 提供了 QUdpSocket 类来实现UDP通信，下面是我在 QUdpSocket 使用过程中的一些心得。



## 一 连接

    udp = new QUdpSocket(this);
    udp->bind(1234);
    connect(udp, SIGNAL(readyRead()), this, SLOT(readSocket()));

## 二 发送数据

    void writeBlock(QByteArray msg) {
      this->writeDatagram(msg, host, port);
    }

## 三 读取数据

    while (this->hasPendingDatagrams()) {
        QByteArray msg;
        msg.resize(this->pendingDatagramSize());
        QHostAddress sender;
        quint16 senderPort;
        udp->readDatagram(msg.data(), msg.size(), &sender, &senderPort);

        qDebug() << msg;
    }

## 四 结语

UDP数据包有64k大小的限制，在使用中要注意不要超出。内网条件下测试UDP基本无丢包。
