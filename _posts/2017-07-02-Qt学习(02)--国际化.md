---
layout: post
title:  "Qt学习(02)--国际化"
categories: Qt
tags:  Qt
author: bloglink
---

* content
{:toc}

因设备出口，需要英文界面，Qt实现国际化还是很容易的，现记录下实现过程  



## 一 创建语言文件

打开.pro文件，加入以下：

    TRANSLATIONS += qm_en.ts

点击工具->外部->Qt语言家->更新翻译,将生成翻译文件 qm_en.ts

经测试某些版本不成功，生成的翻译文件是空的，而使用命令可以成功

    lupdate xxx.pro

## 二 编辑翻译文件

生成的.ts文件为xml格式，可以使用Qt自带的 *Linguist* 对 *qm_en.ts* 进行编辑,也可以使用其他xml编辑器编辑.ts文档

## 三 生成翻译文件

点击工具->外部->Qt语言家->部署翻译,将生成语言文件qm_en.qm
不成功的话也可使用命令

    lrelease xxx.pro

## 四 加载翻译文件

    QApplication a(argc, argv);
    QTranslator translator;
    translator.load("qm_en.qm");
    qApp->installTranslator(&translator);

## 五 多国语言切换

加载不同的.qm文件可以实现多语言切换，因没有动态切换需求，项目使用配置文件切换语言，可实现重启设备后语言生效
